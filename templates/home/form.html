{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}

  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header card-header-primary">
          <h4 class="card-title">Historia clínica</h4>
          <p class="card-category">Completa la historia clínica</p>
        </div>
        <div class="card-body">

          <div class="d-flex justify-content-center">
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-demograficos" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Demográficos</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-acompanante" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Acompañante</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-habitos" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Hábitos</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-disabled-tab" data-bs-toggle="pill" data-bs-target="#pills-clinica" type="button" role="tab" aria-controls="pills-disabled" aria-selected="false">Historia clínica</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-diagnostico" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Diagnóstico</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-evolucion" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Evolución</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-test" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Test</button>
              </li>
            </ul>
          </div>

          <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="tab-content" id="pills-tabContent">
              <div class="tab-pane fade show active" id="pills-demograficos" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                <div class="row mt-4">

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.cedula.id_for_label }} class="bmd-label-floating">{{ patient_form.cedula.label }}</label>
                      {{ patient_form.cedula }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.nombre.id_for_label }} class="bmd-label-floating">{{ patient_form.nombre.label }}</label>
                      {{ patient_form.nombre }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.apellidos.id_for_label }} class="bmd-label-floating">{{ patient_form.apellidos.label }}</label>
                      {{ patient_form.apellidos }}
                    </div>
                  </div>
    
                </div>
    
    
                <div class="row mt-4">
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.fecha_nacimiento.id_for_label }} class="bmd-label-static">{{ patient_form.fecha_nacimiento.label }}</label>
                      {{ patient_form.fecha_nacimiento }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.telefono.id_for_label }} class="bmd-label-floating">{{ patient_form.telefono.label }}</label>
                      {{ patient_form.telefono }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.email.id_for_label }} class="bmd-label-floating">{{ patient_form.email.label }}</label>
                      {{ patient_form.email }}
                    </div>
                  </div>
    
                </div>

    
                <div class="row mt-4">
    
                  <div class="col-md-4">
                    <div class="form-group bmd-form-group">
                      <label for={{ patient_form.ocupacion.id_for_label }} class="bmd-label-static">{{ patient_form.ocupacion.label }}</label>
                      {{ patient_form.ocupacion }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.profesion.id_for_label }} class="bmd-label-floating">{{ patient_form.profesion.label }}</label>
                      {{ patient_form.profesion }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.seguridad_social.id_for_label }} class="bmd-label-floating">{{ patient_form.seguridad_social.label }}</label>
                      {{ patient_form.seguridad_social }}
                    </div>
                  </div>
    
                </div>
              </div>
              <div class="tab-pane fade" id="pills-acompanante" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
                <div class="row">
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.acompanante.id_for_label }} class="bmd-label-floating">{{ patient_form.acompanante.label }}</label>
                      {{ patient_form.acompanante }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.parentesco.id_for_label }} class="bmd-label-floating">{{ patient_form.parentesco.label }}</label>
                      {{ patient_form.parentesco }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.telefono_acompanante.id_for_label }} class="bmd-label-floating">{{ patient_form.telefono_acompanante.label }}</label>
                      {{ patient_form.telefono_acompanante }}
                    </div>
                  </div>
    
                </div>
              </div>
              <div class="tab-pane fade" id="pills-habitos" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">
                <div class="row">

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.actividad_fisica.id_for_label }} class="bmd-label-floating">{{ patient_form.actividad_fisica.label }}</label>
                      {{ patient_form.actividad_fisica }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for={{ patient_form.tipo_actividad_fisica.id_for_label }} class="bmd-label-floating">{{ patient_form.tipo_actividad_fisica.label }}</label>
                      {{ patient_form.tipo_actividad_fisica }}
                    </div>
                  </div>
    
                  <div class="col-md-4">
                    <div class="form-group bmd-form-group">
                      <label for={{ patient_form.frecuencia_actividad_fisica.id_for_label }} class="bmd-label-static">{{ patient_form.frecuencia_actividad_fisica.label }}</label>
                      {{ patient_form.frecuencia_actividad_fisica }}
                    </div>
                  </div>
    
                </div>
              </div>
              <div class="tab-pane fade" id="pills-clinica" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">

                  <div class="col-md-6">
                    <div class="form-group">
                      <label for={{ patient_form.motivo_consulta.id_for_label }} class="bmd-label-floating">{{ patient_form.motivo_consulta.label }}</label>
                      {{ patient_form.motivo_consulta }}
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-group">
                      <label for={{ patient_form.cronologia_de_patologia.id_for_label }} class="bmd-label-floating">{{ patient_form.cronologia_de_patologia.label }}</label>
                      {{ patient_form.cronologia_de_patologia }}
                    </div>
                  </div>

                </div>

                <div class="row">
            
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for={{ patient_form.conclusion.id_for_label }} class="bmd-label-floating">{{ patient_form.conclusion.label }}</label>
                      {{ patient_form.conclusion }}
                    </div>
                  </div>

                  <div class="col-md-6">
                    <label for={{ patient_form.adjuntar_documento.id_for_label }} for={{ patient_form.adjuntar_documento.id_for_label }}>{{ patient_form.adjuntar_documento.label }}</label>
                    {{ patient_form.adjuntar_documento }}
                  </div>

                </div>
              </div>
              <div class="tab-pane fade" id="pills-diagnostico" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">

                  <div class="col-md-12">
                    <div class="form-group">
                      <label for={{ patient_form.diagnostico.id_for_label }} class="bmd-label-floating">{{ patient_form.diagnostico.label }}</label>
                      {{ patient_form.diagnostico }}
                    </div>
                  </div>

                  <div class="col-md-12">
                    <div class="form-group">
                      <button id="diagnostic-form-adder">
                        Crear diagnóstico
                      </button>
                      <div>
                        {{ diagnostic_form }}
                      </div>
                    </div>
                  </div>

                </div>
              </div>
              <div class="tab-pane fade" id="pills-evolucion" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">

                  

                  <div class="accordion" id="accordionExample">
                    {% for record in evolution_records %}
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapseOne">
                          {{ record }}
                        </button>
                      </h2>
                      <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                          {{ record.evolucion }}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>

                  <div class="col-md-12">
                    <div class="form-group">
                      <button id="evolution-form-adder">
                        Agregar evolución
                      </button>
                      {% comment %} <label for={{ evolution_form.evolucion.id_for_label }} class="bmd-label-floating">{{ evolution_form.evolucion.label }}</label>
                      {{ evolution_form.evolucion }} {% endcomment %}
                    </div>
                  </div>

                </div>
              </div>
              <div class="tab-pane fade" id="pills-test" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">

                  <div class="accordion" id="accordionExample">
                    {% for patient_test in patient_tests %}
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapseOne">
                          {{ patient_test }}
                        </button>
                      </h2>
                      <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                          {{ patient_test.result }}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>

                  <div class="col-md-12">
                    
                    <div class="form-group">
                      <button id="test-form-adder">
                        Agregar test
                      </button>
                      {% comment %} <label for={{ form.diagnostico.id_for_label }} class="bmd-label-floating">{{ form.diagnostico.label }}</label>
                      {{ form.diagnostico }} {% endcomment %}
                    </div>
                  </div>

                </div>
              </div>
            </div>
              
            <button type="submit" class="btn btn-primary pull-right">Guardar</button>
            <div class="clearfix"></div>
          </form>

        </div>
      </div>
    </div>
  </div>

  
  
{% endblock content %}

{% block javascripts %}
{% comment %} <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script> {% endcomment %}


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" type="text/javascript"></script>

<!-- Page specific JavaScript -->
{% comment %} {{ js_variables|json_script:'js-variables' }} {% endcomment %}
<script type="text/javascript" src={% static 'assets/js/form.js' %}></script>
{% endblock javascripts %}